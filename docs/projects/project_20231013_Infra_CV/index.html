<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.52">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="João Granja-Correia">
<meta name="dcterms.date" content="2023-10-13">
<meta name="description" content="A Novafrica project, developed for Instituto Camões, evaluating the impact of Portuguese-Financed Infrastructures in Cape Verde.">

<title>Evaluation of the Impact of Portuguese-Financed Infrastructures in Cape Verde – João Granja-Correia</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/iconify-1.0.7/iconify-icon.min.js"></script>
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">João Granja-Correia</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects/projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/blog.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://fediscience.org/@joaogranjacorreia"> <i class="bi bi-mastodon" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/joaojcorreia"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/joaojcorreia"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0009-0003-8982-278X"> 
<span class="menu-text"><iconify-icon inline="" icon="fa6-brands:orcid"></iconify-icon></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#saquinho" id="toc-saquinho" class="nav-link active" data-scroll-target="#saquinho">Saquinho</a></li>
  <li><a href="#figueira-gorda" id="toc-figueira-gorda" class="nav-link" data-scroll-target="#figueira-gorda">Figueira Gorda</a></li>
  <li><a href="#final-assessment" id="toc-final-assessment" class="nav-link" data-scroll-target="#final-assessment">Final assessment</a></li>
  <li><a href="#final-thoughts-and-future-works" id="toc-final-thoughts-and-future-works" class="nav-link" data-scroll-target="#final-thoughts-and-future-works">Final thoughts and future works</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Evaluation of the Impact of Portuguese-Financed Infrastructures in Cape Verde</h1>
</div>

<div>
  <div class="description">
    <p>A Novafrica project, developed for Instituto Camões, evaluating the impact of Portuguese-Financed Infrastructures in Cape Verde.</p>
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>João Granja-Correia </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 13, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>In 2021, I participated in an impact evaluation project for <a href="https://www.novasbe.unl.pt/en/">Nova SBE</a>’s <a href="https://novafrica.org/">Novafrica</a> knowledge center, assessing the impact of various infrastructures financed by a Portuguese credit line in <a href="https://en.wikipedia.org/wiki/Cape_Verde">Cape Verde</a>. This project was commissioned by <a href="https://www.instituto-camoes.pt/en/">Instituto Camões</a>, the Portuguese cooperation agency, which required an independent impact evaluation to present to the <a href="https://www.oecd.org/development/">OECD Development Assistance Committee</a>.</p>
<p>The primary objective was to evaluate the impact of five different infrastructures financed under a Portuguese cooperation credit line. These infrastructures included:</p>
<ul>
<li>Figueira Gorda irrigation reservoir</li>
<li>Saquinho irrigation reservoir</li>
<li>Expansion of the Praia commercial harbor</li>
<li>Expansion of the Porto Novo commercial harbor</li>
<li>Sal photovoltaic power station</li>
</ul>
<p>As an agronomist by training, I was responsible for conducting a comprehensive evaluation of the two reservoirs.</p>
<p>This project presented significant challenges for me, as it had become somewhat of a political quagmire. On one hand, the construction of these reservoirs had evolved into a highly contentious political issue. This initiative was initially promoted around 2013-2014 by the previous <a href="https://en.wikipedia.org/wiki/African_Party_for_the_Independence_of_Cape_Verde">PAICV</a> government, involving the construction of seven reservoirs. However, three of these reservoirs quickly became visible failures. Banca Furada failed to retain any water due to unforeseen geological constraints, Salineiro never had significant water due to a lack of rain in the southern part of Santiago Island, and Canto Cagarra was flooded with debris following a torrential rain event. With parliamentary elections in 2016, the opposition party at the time, <a href="https://en.wikipedia.org/wiki/Movement_for_Democracy_(Cape_Verde)">MpD</a>, capitalized on these failures to exploit the prevailing negative views on irrigation reservoirs to their advantage. After the 2016 election, which changed the parliament’s composition, MpD assumed office and significantly curtailed further investment in the irrigation reservoirs, effectively limiting the potential success of the infrastructures. Simultaneously, they used these failures as a source of political capital when criticizing PAICV, now in the opposition.</p>
<p>On the other hand, negotiations were underway for a new credit line between the two states. The MpD government had a vested interest in demonstrating the success of these projects to make securing a new credit line a logical and justifiable step.</p>
<p>As part of our initial assessment and data gathering efforts, we conducted approximately a dozen interviews, involving both local officials and foreign experts who had worked on the projects. The ambiguity surrounding the projects was immediately apparent during interviews with local officials and civil servants. Those more aligned with the current government, while questioning the viability of developing reservoirs in Cape Verde, emphasized their commitment to getting the most out of the built infrastructure. Others, not politically aligned with the current government, lamented how the lack of investment in the infrastructures had condemned them to low impact, if not complete failure. The latter also speculated on the potential indirect impact of the reservoirs in recharging groundwater resources.</p>
<p>In contrast, the message from foreign experts was significantly different. They had been involved only in the initial stages and had not interacted with the current political party. They highlighted the pressure the projects had faced to deliver the reservoirs but expressed doubts about the deployment of irrigation distribution networks.</p>
<p>In fact that was the situation on the ground. The irrigation network had just been inaugurated by the current government, right in time for the 2021 election cycle. So since the reservoirs’ construction in 2014/2015, they had remained without an irrigation network. Our initial analysis of the situation was complemented with satellite imagery from the <a href="https://www.copernicus.eu/en">Corpernicus</a> network that confirmed that none of the areas that were supposed to benefit from the investment had any signs of irrigated farming.</p>
<p>This was the data we had to work with before we visited the infrastructures in June 2021. In our visits, and with the assistance of a local team that spoke the creole, we conducted a couple of hundreds of questionnaires to both farmers, produce peddlers (an important local figure of stakeholder) and local business. Our questionnaires were designed to assess if there had been an expansion of production, of irrigation, a change in the type of crops produced, on the type of commerce being conducted, and the general view on the investment by the stakeholders.</p>
<section id="saquinho" class="level1">
<h1>Saquinho</h1>
<p>The situation in Saquinho was challenging. The Saquinho reservoir is situated in a narrow gorge overlooked by the Santa Catarina plateau, with a significant height difference between the two. Its initial intention was to allow the irrigation of the fields on the plateau; however, not only were there significant energy costs to pump the water to such heights, but the plateau is also constantly battered by strong winds, making it less suitable for irrigated agriculture without further investments.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/DSC_0056.JPG" class="img-fluid figure-img" alt="Saquinho reservoir" width="800"></p>
<figcaption>View of the Saquinho reservoir</figcaption>
</figure>
</div>
<p>Moreover, the construction of the reservoir had blocked a pre-existing irrigation gallery, which left it upstream from the reservoir itself, providing water to the Tabugal basin farmers. Consequently, the construction of the reservoir not only resulted in no actual use for the gathered water but also led to a reduction in water availability for the farmers of the Tabugal basin, where irrigated farming had been practiced prior to its construction. When we visited the area, an alternative irrigation network that supplied water to the Tabugal basin had recently been inaugurated. However, after more than six years without a water supply, many of the fields had been abandoned. We could see visible signs of coconut and mango trees that had died due to the lack of water.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/DSC_0099.JPG" class="img-fluid figure-img" alt="Tabugal basin" width="800"></p>
<figcaption>Tabugal basin</figcaption>
</figure>
</div>
<p>The disruption in water availability had devastated local farming and had a severe impact on the livelihoods of the farmers in the area. Furthermore, the absence of road infrastructure created additional challenges for the small-scale farmers working there, as they were forced to transport their produce either manually or with the assistance of donkeys. One positive aspect that certainly needs further attention from local authorities and planning specialists is the fact that although there had been a drought for several years, the stream had running water. Surely a sign of the positive impact of the reservoir in the regions ground-water levels.</p>
</section>
<section id="figueira-gorda" class="level1">
<h1>Figueira Gorda</h1>
<p>To our great surprise, the situation in Figueira Gorda was completely different from that in Saquinho. During our interviews, some officials had mentioned farming in the vicinity of the reservoir, with farmers directly exploiting the reservoir’s water, which we confirmed via satellite imagery. However, we had no idea of the extent of these activities.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/20210624_155812-PANO-EDIT.jpg" class="img-fluid figure-img" alt="View of the Figueira Gorda irrigation reservoir" width="800"></p>
<figcaption>View of the Figueira Gorda irrigation reservoir</figcaption>
</figure>
</div>
<p>On the ground, we witnessed a dynamic ecosystem of small farmers and produce peddlers who bought produce in the fields and sold it in the urban center. Small-scale farmers with small motor pumps had improvised solutions that allowed them to irrigate their fields. With the available water, they transformed their crop profile from low-value cash crops like maize and cassava to higher-value horticultural crops like tomatoes and bell peppers. This, in turn, created new opportunities for the produce peddlers, who, with a greater supply of high-value produce, expanded their businesses, further promoting demand for horticultural goods. A virtuous cycle was established, limited only by the amount of water available for irrigation.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/DSC_0011.JPG" class="img-fluid figure-img" width="800"></p>
<figcaption>Farmer gathering water directly from the basin to spray-crops</figcaption>
</figure>
</div>
<p>In fact, the immediate vicinity of the reservoir had become so bustling with farmers, field laborers, and produce peddlers that a small informal restaurant had been established there to provide food and beverages to all who made their living there.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/DSC_0005.JPG" class="img-fluid figure-img" width="800"></p>
<figcaption>Immediate vicinity of the reservoir with horticultural crops</figcaption>
</figure>
</div>
<p>Hence, what initially seemed like a failed project, once we visited the field, revealed itself to be a success. This was my first significant lesson on the importance of phronesis, highlighting the importance of immersing ourselves in the specifics of the context we are studying before reaching any conclusions based on preconceived theories and ideas.</p>
</section>
<section id="final-assessment" class="level1">
<h1>Final assessment</h1>
<p>Given what we encountered in the ground we gave two different assessments of the impact of the infrastructures. In Saquinho the impact was clearly negative. Although there was potential to revert the situation, the disruption in the supply of water and the lack of infrastructure to distribute produce had had a negative lasting impact in the local farming community. Usage of the newly inaugurated distribution network had to be promoted and better roads had to be developed. However, in Figueira Gorda, the scenario was completely different, the availability of water and ingenuity of the local farmers in exploiting it had transformed the region and created a dynamic ecosystem, that was generating income for a broad group of stakeholders.</p>
<p>The full report is publicly available on the <a href="https://www.instituto-camoes.pt/images/sobre_nos/Relat%C3%B3rio_Final_Avalia%C3%A7%C3%A3o_impacto_infraestruturas_Cabo_Verde.pdf">Instituto Camões website</a>.</p>
<p>Following the presentation of the report to Instituto Camões, in February 2022 we were invited to give a <a href="https://www.instituto-camoes.pt/sobre/comunicacao/noticias/cabo-verde-apresentacao-publica-da-avaliacao-do-impacto-de-infraestruturas-em-cabo-verde-financiadas-por-linhas-de-credito-de-portugal?highlight=WyJhdmFsaWFcdTAwZTdcdTAwZTNvIiwiJ2F2YWxpYVx1MDBlN1x1MDBlM28iLCJkZSIsImRlJyIsImRlJ3RpcnJlbmkiLCInZGUiLCJpbXBhY3RvIiwiY2FibyIsInZlcmRlIiwidmVyZGUnIiwidmVyZGUncyIsImF2YWxpYVx1MDBlN1x1MDBlM28gZGUiLCJhdmFsaWFcdTAwZTdcdTAwZTNvIGRlIGltcGFjdG8iLCJkZSBpbXBhY3RvIiwiY2FibyB2ZXJkZSJd">public presentation of our findings</a>. You can find the presentation deck, also on the <a href="https://www.instituto-camoes.pt/images/sobre_nos/Apresenta%C3%A7%C3%A3o_20220307.pdf">Instituto Camões website</a>.</p>
<p>Below you will find the youtube video of the TCV report on the presentation.</p>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/2vON7JPErpQ?start=117" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
</section>
<section id="final-thoughts-and-future-works" class="level1">
<h1>Final thoughts and future works</h1>
<p>It gave me immense pleasure to participate in this project. It was an incredibly enriching experience that not only allowed me to apply some of my agronomist knowledge that I hadn’t used in a long time but also pushed me out of my comfort zone and compelled me to develop new skills. One of these skills was a new way of looking at issues, understanding that problems aren’t always linear. Analysis can be ambiguous, and sometimes it requires a significant amount of context to interpret.</p>
<p>Another skill that I was compelled to develop during this project was writing. A considerable amount of time had passed since I wrote my master’s thesis, and I felt a bit out of practice (not that I was ever particularly practiced in it). Fortunately, one of my colleagues in the project provided me with valuable mentoring on writing. He advised me to simply start writing, begin from the end, or commence from where I felt most comfortable, but just to write. This advice was genuinely insightful and set me on the right path. Thanks to this guidance, I was not only able to write the report, but I also discovered something that brings me great pleasure. In fact, it was one of the factors that finally pushed me over the edge to start my PhD.</p>
<p>Regarding future projects, I intend in the near future to utilize the publicly available data that we gathered and, using Hirchman’s concept of the “hiding hand,” develop a study on how end-user bricolage can contribute to turning a failed project into a success.</p>
<p>I also believe there is ample research to be conducted in this field and environment. The solution to Cape Verde’s water issues isn’t straightforward. Given the variability of the monsoon rains in the country, reservoirs that allow for the storage of this water that would otherwise go to waste certainly play a role. It is crucial to conduct a broader study that assesses the diffuse impact of these reservoirs on groundwater levels, farming, and food security in their areas of influence.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{granja-correia2023,
  author = {Granja-Correia, João},
  title = {Evaluation of the {Impact} of {Portuguese-Financed}
    {Infrastructures} in {Cape} {Verde}},
  date = {2023-10-13},
  url = {https://joao.granja-correia.eu/projects/project_20231013_Infra_CV/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-granja-correia2023" class="csl-entry quarto-appendix-citeas" role="listitem">
Granja-Correia, João. 2023. <span>“Evaluation of the Impact of
Portuguese-Financed Infrastructures in Cape Verde.”</span> October 13,
2023. <a href="https://joao.granja-correia.eu/projects/project_20231013_Infra_CV/">https://joao.granja-correia.eu/projects/project_20231013_Infra_CV/</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/joao\.granja-correia\.eu");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2024, João Granja-Correia</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>